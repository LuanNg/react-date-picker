!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-ultra-select"),require("deep-equal")):"function"==typeof define&&define.amd?define(["react","react-ultra-select","deep-equal"],t):"object"==typeof exports?exports["react-ultra-date-picker"]=t(require("react"),require("react-ultra-select"),require("deep-equal")):e["react-ultra-date-picker"]=t(e.react,e["react-ultra-select"],e["deep-equal"])}(this,function(e,t,n){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addLocaleConfig=t.translateHour=t.isPm=t.padStartWith0=t.daysInMonth=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(2),c=a(l),p=n(3),f=a(p),h=n(4),d=a(h),m=t.daysInMonth=function(e,t){return new Date(e,t,0).getDate()},y=t.padStartWith0=function(e){return e>=10?e.toString():"0"+e},g=(t.isPm=function(e){return e.getHours()>=12},t.translateHour=function(e,t){return t?y(e):e%12===0?"12":y(e%12)}),v={order:["month","date","year","hour","minute","ampm"],year:function(e){return e},month:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]},date:function(e){return y(e)},am:"AM",pm:"PM",hour:g,minute:function(e){return y(e)},confirmButton:"Confirm",cancelButton:"Cancel",dateLabel:function(e,t,n){var a=e.date,r=e.noneSelected,o=e.outOfRange;if(r)return"Please select a date";if(o)return"Date out of range";switch(t){case"time":return v.hour(a.getHours(),n)+":"+v.minute(a.getMinutes())+(n?"":" "+(a.getHours()<12?v.am:v.pm));case"month":return v.month(a.getMonth())+" "+v.year(a.getFullYear());case"datetime":return v.month(a.getMonth())+" "+v.date(a.getDate())+" "+v.year(a.getFullYear())+" "+v.hour(a.getHours(),n)+":"+v.minute(a.getMinutes())+(n?"":" "+(a.getHours()<12?v.am:v.pm));case"date":return v.month(a.getMonth())+" "+v.date(a.getDate())+" "+v.year(a.getFullYear());default:return""}}},D={order:["year","month","date","ampm","hour","minute"],year:function(e){return e+"年"},month:function(e){return e+1+"月"},date:function(e){return e+"日"},am:"上午",pm:"下午",hour:g,minute:function(e){return y(e)},confirmButton:"确定",cancelButton:"取消",dateLabel:function(e,t,n){var a=e.date,r=e.noneSelected,o=e.outOfRange;if(r)return"请选择日期";if(o)return"日期不在选择范围内";var s="";switch(n||(s=a.getHours()<12?D.am:D.pm),t){case"time":return""+s+D.hour(a.getHours(),n)+":"+D.minute(a.getMinutes());case"month":return""+D.year(a.getFullYear())+D.month(a.getMonth());case"datetime":return""+D.year(a.getFullYear())+D.month(a.getMonth())+D.date(a.getDate())+" "+s+D.hour(a.getHours(),n)+":"+D.minute(a.getMinutes());case"date":return""+D.year(a.getFullYear())+D.month(a.getMonth())+D.date(a.getDate());default:return""}}},k={en:v,"zh-cn":D},b=(t.addLocaleConfig=function(e,t){t&&t.order instanceof Array&&"function"==typeof t.year&&"function"==typeof t.month&&"function"==typeof t.date&&"function"==typeof t.hour&&"function"==typeof t.minute&&"function"==typeof t.dateLabel?k[e]=t:console.error("addLocaleConfig: invalid locale config provided")},function(e,t,n){return e[t]?"number"==typeof e[t]?null:"string"!=typeof e[t]?new Error(n+": "+t+" invalid date string provided."):"time"===e.type&&e[t].match(/\d{2}:\d{2}/)&&5===e[t].length?null:Number.isNaN(new Date(e[t]))?new Error(n+": "+t+" invalid date string provided."):null:null}),S=function(e,t,n){return"string"==typeof e[t]&&k[e[t]]?null:new Error(n+": "+t+" invalid value provided.")},x=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));n.getStaticText=n.getStaticText.bind(n),n.getTitle=n.getTitle.bind(n),n.onSelect=n.onSelect.bind(n),n.onDidSelect=n.onDidSelect.bind(n),n.onOpen=n.onOpen.bind(n),n.onClose=n.onClose.bind(n),n.onConfirm=n.onConfirm.bind(n),n.onCancel=n.onCancel.bind(n);var a=n.parseDateString(e.min,e.type),s=n.parseDateString(e.max,e.type),i=n.getDefaultDate(e);return n.state=n.calColumnsAndKeys(n.props,i,a,s,!0),n}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.parseDateString(e.min,e.type),n=this.parseDateString(e.max,e.type),a=this.getDefaultDate(e);this.setState(this.calColumnsAndKeys(e,a,t,n,!0))}},{key:"shouldComponentUpdate",value:function(e,t){if(Object.keys(this.props).length!==Object.keys(e).length)return!0;var n=!0,a=!1,r=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;if(!i.startsWith("on")&&e[i]!==this.props[i])return!0}}catch(u){a=!0,r=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw r}}if(Object.keys(this.state).length!==Object.keys(t).length)return!0;var l=!0,c=!1,p=void 0;try{for(var f,h=Object.keys(t)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;if("keys"===m||"columns"===m){if(!(0,d["default"])(t[m],this.state[m]))return!0}else if("defaultDate"===m||"minDate"===m||"maxDate"===m){if(t[m].getTime()!==this.state[m].getTime())return!0}else if(t[m]!==this.state[m])return!0}}catch(u){c=!0,p=u}finally{try{!l&&h["return"]&&h["return"]()}finally{if(c)throw p}}return!1}},{key:"onSelect",value:function(){for(var e=this,t=new Date(this.state.defaultDate.getTime()),n=this.refs.select.selectedValues,a=["year","month","date","ampm","hour","minute"],r=function(r){var o=e.state.keys.findIndex(function(e){return e===a[r]});if(-1!==o)switch(a[r]){case"year":t.setFullYear(n[o].key);break;case"month":t.setDate(1),t.setMonth(n[o].key);break;case"date":var s=m(t.getFullYear(),t.getMonth()+1);n[o].key>s?t.setDate(s):t.setDate(n[o].key);break;case"minute":t.setMinutes(n[o].key);break;case"hour":if(!e.props.use24hours){var i=e.state.keys.findIndex(function(e){return"ampm"===e}),u=e.refs.select.selectedValues[i].key;if("pm"===u&&n[o].key<12){t.setHours(n[o].key+12);break}if("am"===u&&n[o].key>=12){t.setHours(n[o].key-12);break}}t.setHours(n[o].key);break;case"ampm":}},o=0;o<a.length;o++)r(o);t<this.state.minDate&&(t=this.state.minDate),t>this.state.maxDate&&(t=this.state.maxDate),this.setState(this.calColumnsAndKeys(this.props,t,this.state.minDate,this.state.maxDate)),this.props.onSelect&&this.props.onSelect(this.date)}},{key:"onDidSelect",value:function(){this.props.onDidSelect&&this.props.onDidSelect(this.date)}},{key:"onOpen",value:function(){this.mOnOpenDate=this.state.defaultDate,this.props.onOpen&&this.props.onOpen(this.date)}},{key:"onClose",value:function(){this.props.onClose&&this.props.onClose(this.date)}},{key:"onConfirm",value:function(){this.setState({noneSelected:!1}),this.props.onConfirm&&this.props.onConfirm(this.date)}},{key:"onCancel",value:function(){this.mOnOpenDate&&(this.setState(this.calColumnsAndKeys(this.props,this.mOnOpenDate,this.state.minDate,this.state.maxDate)),this.mOnOpenDate=null,this.props.onCancel&&this.props.onCancel(this.date))}},{key:"getTitle",value:function(){return this.props.getTitle?this.props.getTitle(this.fullDate):this.props.title}},{key:"getStaticText",value:function n(){var e=this.props,n=e.getStaticText,t=e.outOfRangeLabel,a=e.noneSelectedLabel,r=e.type,o=e.use24hours,s=this.state,i=s.outOfRange,u=s.noneSelected;if(n)return n(this.fullDate);if(u&&a)return a;if(i&&t)return t;var l=k[this.props.locale];return l?l.dateLabel(this.fullDate,r,o):null}},{key:"getDefaultDate",value:function(e){var t=e||this.props;return this.parseDateString(t.defaultDate?t.defaultDate:t.min,t.type)}},{key:"parseDateString",value:function(e,t){var n=void 0;if("time"===t)if(n=new Date,e.match(/\d{2}:\d{2}/)&&5===e.length)n.setHours(parseInt(e.substring(0,2),10)),n.setMinutes(parseInt(e.substring(3,5),10));else{var a=new Date(e);n.setHours(a.getHours()),n.setMinutes(a.getMinutes())}else"date"===t?(n=new Date(e),n.setHours(0),n.setMinutes(0)):"month"===t?(n=new Date(e),n.setDate(1),n.setHours(0),n.setMinutes(0)):"datetime"===t&&(n=new Date(e));return n.setSeconds(0),n.setMilliseconds(0),n}},{key:"calColumnsAndKeys",value:function(e,t,n,a,r){var o=e||this.props,s=t,i=o.type,u=o.use24hours,l=o.locale,c=void 0;switch(i){case"date":c=["year","month","date"];break;case"datetime":c=u?["year","month","date","hour","minute"]:["year","month","date","ampm","hour","minute"];break;case"time":c=u?["hour","minute"]:["ampm","hour","minute"];break;case"month":c=["year","month"]}var p={},f=!1;n>s?(f=!0,s=n):s>a&&(f=!0,s=a);for(var h=0,d=c.length;d>h;h++)switch(c[h]){case"year":p[c[h]]=this.calYear(n,a,s,l);break;case"month":p[c[h]]=this.calMonth(n,a,s,l);break;case"date":p[c[h]]=this.calDate(n,a,s,l);break;case"ampm":p[c[h]]=this.calAMPM(n,a,s,l);break;case"hour":var m=void 0;p.ampm&&(m=p.ampm.list[p.ampm.defaultIndex].key),p[c[h]]=this.calHour(n,a,s,m,l,u);break;case"minute":p[c[h]]=this.calMinute(n,a,s,l)}for(var y=k[l],g=[],v=[],D=0,b=y.order.length;b>D;D++)p[y.order[D]]&&(g.push(p[y.order[D]]),v.push(y.order[D]));return{keys:v,columns:g,outOfRange:f,defaultDate:s,minDate:n,maxDate:a,noneSelected:!(r?e.defaultDate:!this.state.noneSelected||e.defaultDate)}}},{key:"newDate",value:function(e,t,n,a,r){return new Date(e,t,n,a,r)}},{key:"intersects",value:function(e,t,n,a){return!(t.getTime()<n.getTime()||e.getTime()>a.getTime())}},{key:"calYear",value:function(e,t,n,a){for(var r={list:[],defaultIndex:-1},o=e.getFullYear(),s=t.getFullYear(),i=0;s>=o;o++){var u=this.newDate(o,0,1,0,0),l=this.newDate(o,11,31,23,59);this.intersects(u,l,e,t)&&(r.list.push({key:o,value:k[a].year(o)}),o===n.getFullYear()&&(r.defaultIndex=i),i++)}return r}},{key:"calMonth",value:function(e,t,n,a){for(var r={list:[],defaultIndex:-1},o=0,s=0;12>o;o++){var i=this.newDate(n.getFullYear(),o,1,0,0),u=this.newDate(n.getFullYear(),o,m(n.getFullYear(),o+1),23,59);this.intersects(i,u,e,t)&&(r.list.push({key:o,value:k[a].month(o)}),o===n.getMonth()&&(r.defaultIndex=s),s++)}return r}},{key:"calDate",value:function(e,t,n,a){for(var r={list:[],defaultIndex:-1},o=m(n.getFullYear(),n.getMonth()+1),s=1,i=0;o>=s;s++){var u=this.newDate(n.getFullYear(),n.getMonth(),s,0,0),l=this.newDate(n.getFullYear(),n.getMonth(),s,23,59);this.intersects(u,l,e,t)&&(r.list.push({key:s,value:k[a].date(s)}),s===n.getDate()&&(r.defaultIndex=i),i++)}return r}},{key:"calAMPM",value:function(e,t,n,a){var r={list:[],defaultIndex:-1},o=0,s=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),0,0),i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),11,59);return this.intersects(s,i,e,t)&&(r.list.push({key:"am",value:k[a].am}),n.getHours()<12&&(r.defaultIndex=o),o++),s=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),12,0),i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),23,59),this.intersects(s,i,e,t)&&(r.list.push({key:"pm",value:k[a].pm}),n.getHours()>=12&&(r.defaultIndex=o)),r}},{key:"calHour",value:function(e,t,n,a,r,o){var s={list:[],defaultIndex:-1},i=void 0,u=void 0;this.props.use24hours?(i=0,u=23):(i=0,u=11);for(var l=i,c=0;u>=l;l++){var p=l;this.props.use24hours||"pm"!==a||(p+=12);var f=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),p,0),h=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),p,59);this.intersects(f,h,e,t)&&(s.list.push({key:p,value:k[r].hour(p,o)}),p===n.getHours()&&(s.defaultIndex=c),c++)}return s}},{key:"calMinute",value:function(e,t,n,a){for(var r={list:[],defaultIndex:-1},o=0,s=0;60>o;o++){var i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),o);this.intersects(i,i,e,t)&&(r.list.push({key:o,value:k[a].minute(o)}),o===n.getMinutes()&&(r.defaultIndex=s),s++)}return r}},{key:"render",value:function(){var e=k[this.props.locale];return c["default"].createElement(f["default"],i({columns:this.state.columns,ref:"select",confirmButton:e.confirmButton,cancelButton:e.cancelButton},this.props,{getStaticText:this.getStaticText,getTitle:this.getTitle,onSelect:this.onSelect,onDidSelect:this.onDidSelect,onOpen:this.onOpen,onClose:this.onClose,onConfirm:this.onConfirm,onCancel:this.onCancel}))}},{key:"date",get:function(){return this.state.outOfRange||this.state.noneSelected?null:this.state.defaultDate}},{key:"fullDate",get:function(){return{date:this.date,noneSelected:this.state.noneSelected,outOfRange:this.state.outOfRange}}}]),t}(l.Component);x.propTypes={max:b,min:b,defaultDate:b,type:l.PropTypes.oneOf(["date","datetime","time","month"]),locale:S,use24hours:l.PropTypes.bool,title:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.node]),outOfRangeLabel:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.node]),noneSelectedLabel:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.node]),getTitle:l.PropTypes.func,getStaticText:l.PropTypes.func,onSelect:l.PropTypes.func,onDidSelect:l.PropTypes.func,onOpen:l.PropTypes.func,onClose:l.PropTypes.func,onConfirm:l.PropTypes.func,onCancel:l.PropTypes.func},x.defaultProps={min:"01 Jan 1970 00:00",max:"19 Jan 2038 03:14",type:"date",locale:"en",use24hours:!1},t["default"]=x},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])});