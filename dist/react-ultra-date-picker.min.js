!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-ultra-select"),require("deep-equal")):"function"==typeof define&&define.amd?define(["react","react-ultra-select","deep-equal"],t):"object"==typeof exports?exports["react-ultra-date-picker"]=t(require("react"),require("react-ultra-select"),require("deep-equal")):e["react-ultra-date-picker"]=t(e.react,e["react-ultra-select"],e["deep-equal"])}(this,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addLocaleConfig=t.translateHour=t.isPm=t.padStartWith0=t.daysInMonth=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),c=r(l),h=n(3),p=r(h),f=n(4),d=r(f),m=t.daysInMonth=function(e,t){return new Date(e,t,0).getDate()},y=t.padStartWith0=function(e){return e>=10?e.toString():"0"+e},g=(t.isPm=function(e){return e.getHours()>=12},t.translateHour=function(e,t){return t?y(e):e%12===0?"12":y(e%12)}),v={order:["month","date","year","hour","minute","ampm"],year:function(e){return e},month:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]},date:function(e){return y(e)},am:"AM",pm:"PM",hour:g,minute:function(e){return y(e)},confirmButton:"Confirm",cancelButton:"Cancel",dateLabel:function(e,t,n,r){if(e)return"Date out of range";switch(n){case"time":return v.hour(t.getHours(),r)+":"+v.minute(t.getMinutes())+(r?"":" "+(t.getHours()<12?v.am:v.pm));case"month":return v.month(t.getMonth())+" "+v.year(t.getFullYear());case"datetime":return v.month(t.getMonth())+" "+v.date(t.getDate())+" "+v.year(t.getFullYear())+" "+v.hour(t.getHours(),r)+":"+v.minute(t.getMinutes())+(r?"":" "+(t.getHours()<12?v.am:v.pm));case"date":return v.month(t.getMonth())+" "+v.date(t.getDate())+" "+v.year(t.getFullYear());default:return""}}},D={order:["year","month","date","ampm","hour","minute"],year:function(e){return e+"年"},month:function(e){return e+1+"月"},date:function(e){return e+"日"},am:"上午",pm:"下午",hour:g,minute:function(e){return y(e)},confirmButton:"确定",cancelButton:"取消",dateLabel:function(e,t,n,r){if(e)return"日期不在选择范围内";var a="";switch(r||(a=t.getHours()<12?D.am:D.pm),n){case"time":return""+a+D.hour(t.getHours(),r)+":"+D.minute(t.getMinutes());case"month":return""+D.year(t.getFullYear())+D.month(t.getMonth());case"datetime":return""+D.year(t.getFullYear())+D.month(t.getMonth())+D.date(t.getDate())+" "+a+D.hour(t.getHours(),r)+":"+D.minute(t.getMinutes());case"date":return""+D.year(t.getFullYear())+D.month(t.getMonth())+D.date(t.getDate());default:return""}}},k={en:v,"zh-cn":D},b=(t.addLocaleConfig=function(e,t){t&&t.order instanceof Array&&"function"==typeof t.year&&"function"==typeof t.month&&"function"==typeof t.date&&"function"==typeof t.hour&&"function"==typeof t.minute&&"function"==typeof t.dateLabel?k[e]=t:console.error("addLocaleConfig: invalid locale config provided")},function(e,t,n){return e[t]?"number"==typeof e[t]?null:"string"!=typeof e[t]?new Error(n+": "+t+" invalid date string provided."):"time"===e.type&&e[t].match(/\d{2}:\d{2}/)&&5===e[t].length?null:Number.isNaN(new Date(e[t]))?new Error(n+": "+t+" invalid date string provided."):null:null}),x=function(e,t,n){return"string"==typeof e[t]&&k[e[t]]?null:new Error(n+": "+t+" invalid value provided.")},M=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));n.getStaticText=n.getStaticText.bind(n),n.getTitle=n.getTitle.bind(n),n.onSelect=n.onSelect.bind(n),n.onDidSelect=n.onDidSelect.bind(n),n.onOpen=n.onOpen.bind(n),n.onClose=n.onClose.bind(n),n.onConfirm=n.onConfirm.bind(n),n.onCancel=n.onCancel.bind(n);var r=n.parseDateString(e.min,e.type),s=n.parseDateString(e.max,e.type),i=n.getDefaultDate(e);return n.state=n.calColumnsAndKeys(n.props,i,r,s),n}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.parseDateString(e.min,e.type),n=this.parseDateString(e.max,e.type),r=this.getDefaultDate(e);this.setState(this.calColumnsAndKeys(e,r,t,n))}},{key:"shouldComponentUpdate",value:function(e,t){if(Object.keys(this.props).length!==Object.keys(e).length)return!0;var n=!0,r=!1,a=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;if(!i.startsWith("on")&&e[i]!==this.props[i])return!0}}catch(u){r=!0,a=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}if(Object.keys(this.state).length!==Object.keys(t).length)return!0;var l=!0,c=!1,h=void 0;try{for(var p,f=Object.keys(t)[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var m=p.value;if("keys"===m||"columns"===m){if(!(0,d["default"])(t[m],this.state[m]))return!0}else if("defaultDate"===m||"minDate"===m||"maxDate"===m){if(t[m].getTime()!==this.state[m].getTime())return!0}else if(t[m]!==this.state[m])return!0}}catch(u){c=!0,h=u}finally{try{!l&&f["return"]&&f["return"]()}finally{if(c)throw h}}return!1}},{key:"onSelect",value:function(){for(var e=this,t=new Date(this.state.defaultDate.getTime()),n=this.refs.select.selectedValues,r=["year","month","date","ampm","hour","minute"],a=function(a){var o=e.state.keys.findIndex(function(e){return e===r[a]});if(-1!==o)switch(r[a]){case"year":t.setFullYear(n[o].key);break;case"month":t.setDate(1),t.setMonth(n[o].key);break;case"date":var s=m(t.getFullYear(),t.getMonth()+1);n[o].key>s?t.setDate(s):t.setDate(n[o].key);break;case"minute":t.setMinutes(n[o].key);break;case"hour":if(!e.props.use24hours){var i=e.state.keys.findIndex(function(e){return"ampm"===e}),u=e.refs.select.selectedValues[i].key;if("pm"===u&&n[o].key<12){t.setHours(n[o].key+12);break}if("am"===u&&n[o].key>=12){t.setHours(n[o].key-12);break}}t.setHours(n[o].key);break;case"ampm":}},o=0;o<r.length;o++)a(o);t<this.state.minDate&&(t=this.state.minDate),t>this.state.maxDate&&(t=this.state.maxDate),this.setState(this.calColumnsAndKeys(this.props,t,this.state.minDate,this.state.maxDate)),this.props.onSelect&&this.props.onSelect(this.date)}},{key:"onDidSelect",value:function(){this.props.onDidSelect&&this.props.onDidSelect(this.date)}},{key:"onOpen",value:function(){this.mOnOpenDate=this.state.defaultDate,this.props.onOpen&&this.props.onOpen(this.date)}},{key:"onClose",value:function(){this.props.onClose&&this.props.onClose(this.date)}},{key:"onConfirm",value:function(){this.props.onConfirm&&this.props.onConfirm(this.date)}},{key:"onCancel",value:function(){this.mOnOpenDate&&(this.setState(this.calColumnsAndKeys(this.props,this.mOnOpenDate,this.state.minDate,this.state.maxDate)),this.mOnOpenDate=null,this.props.onCancel&&this.props.onCancel(this.date))}},{key:"getTitle",value:function(){return this.props.title}},{key:"getStaticText",value:function(){var e=k[this.props.locale];return e?e.dateLabel(this.state.outOfRange,this.state.defaultDate,this.props.type,this.props.use24hours):null}},{key:"getDefaultDate",value:function(e){var t=e||this.props;return this.parseDateString(t.defaultDate?t.defaultDate:t.min,t.type)}},{key:"parseDateString",value:function(e,t){var n=void 0;if("time"===t)if(n=new Date,e.match(/\d{2}:\d{2}/)&&5===e.length)n.setHours(parseInt(e.substring(0,2),10)),n.setMinutes(parseInt(e.substring(3,5),10));else{var r=new Date(e);n.setHours(r.getHours()),n.setMinutes(r.getMinutes())}else"date"===t?(n=new Date(e),n.setHours(0),n.setMinutes(0)):"month"===t?(n=new Date(e),n.setDate(1),n.setHours(0),n.setMinutes(0)):"datetime"===t&&(n=new Date(e));return n.setSeconds(0),n.setMilliseconds(0),n}},{key:"calColumnsAndKeys",value:function(e,t,n,r){var a=e||this.props,o=t,s=a.type,i=a.use24hours,u=a.locale,l=void 0;switch(s){case"date":l=["year","month","date"];break;case"datetime":l=i?["year","month","date","hour","minute"]:["year","month","date","ampm","hour","minute"];break;case"time":l=i?["hour","minute"]:["ampm","hour","minute"];break;case"month":l=["year","month"]}var c={},h=!1;n>o?(h=!0,o=n):o>r&&(h=!0,o=r);for(var p=0,f=l.length;f>p;p++)switch(l[p]){case"year":c[l[p]]=this.calYear(n,r,o,u);break;case"month":c[l[p]]=this.calMonth(n,r,o,u);break;case"date":c[l[p]]=this.calDate(n,r,o,u);break;case"ampm":c[l[p]]=this.calAMPM(n,r,o,u);break;case"hour":var d=void 0;c.ampm&&(d=c.ampm.list[c.ampm.defaultIndex].key),c[l[p]]=this.calHour(n,r,o,d,u,i);break;case"minute":c[l[p]]=this.calMinute(n,r,o,u)}for(var m=k[u],y=[],g=[],v=0,D=m.order.length;D>v;v++)c[m.order[v]]&&(y.push(c[m.order[v]]),g.push(m.order[v]));return{keys:g,columns:y,outOfRange:h,defaultDate:o,minDate:n,maxDate:r}}},{key:"newDate",value:function(e,t,n,r,a){return new Date(e,t,n,r,a)}},{key:"intersects",value:function(e,t,n,r){return!(t.getTime()<n.getTime()||e.getTime()>r.getTime())}},{key:"calYear",value:function(e,t,n,r){for(var a={list:[],defaultIndex:-1},o=e.getFullYear(),s=t.getFullYear(),i=0;s>=o;o++){var u=this.newDate(o,0,1,0,0),l=this.newDate(o,11,31,23,59);this.intersects(u,l,e,t)&&(a.list.push({key:o,value:k[r].year(o)}),o===n.getFullYear()&&(a.defaultIndex=i),i++)}return a}},{key:"calMonth",value:function(e,t,n,r){for(var a={list:[],defaultIndex:-1},o=0,s=0;12>o;o++){var i=this.newDate(n.getFullYear(),o,1,0,0),u=this.newDate(n.getFullYear(),o,m(n.getFullYear(),o+1),23,59);this.intersects(i,u,e,t)&&(a.list.push({key:o,value:k[r].month(o)}),o===n.getMonth()&&(a.defaultIndex=s),s++)}return a}},{key:"calDate",value:function(e,t,n,r){for(var a={list:[],defaultIndex:-1},o=m(n.getFullYear(),n.getMonth()+1),s=1,i=0;o>=s;s++){var u=this.newDate(n.getFullYear(),n.getMonth(),s,0,0),l=this.newDate(n.getFullYear(),n.getMonth(),s,23,59);this.intersects(u,l,e,t)&&(a.list.push({key:s,value:k[r].date(s)}),s===n.getDate()&&(a.defaultIndex=i),i++)}return a}},{key:"calAMPM",value:function(e,t,n,r){var a={list:[],defaultIndex:-1},o=0,s=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),0,0),i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),11,59);return this.intersects(s,i,e,t)&&(a.list.push({key:"am",value:k[r].am}),n.getHours()<12&&(a.defaultIndex=o),o++),s=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),12,0),i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),23,59),this.intersects(s,i,e,t)&&(a.list.push({key:"pm",value:k[r].pm}),n.getHours()>=12&&(a.defaultIndex=o)),a}},{key:"calHour",value:function(e,t,n,r,a,o){var s={list:[],defaultIndex:-1},i=void 0,u=void 0;this.props.use24hours?(i=0,u=23):(i=0,u=11);for(var l=i,c=0;u>=l;l++){var h=l;this.props.use24hours||"pm"!==r||(h+=12);var p=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),h,0),f=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),h,59);this.intersects(p,f,e,t)&&(s.list.push({key:h,value:k[a].hour(h,o)}),h===n.getHours()&&(s.defaultIndex=c),c++)}return s}},{key:"calMinute",value:function(e,t,n,r){for(var a={list:[],defaultIndex:-1},o=0,s=0;60>o;o++){var i=this.newDate(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),o);this.intersects(i,i,e,t)&&(a.list.push({key:o,value:k[r].minute(o)}),o===n.getMinutes()&&(a.defaultIndex=s),s++)}return a}},{key:"render",value:function(){var e=k[this.props.locale];return c["default"].createElement(p["default"],i({columns:this.state.columns,ref:"select",confirmButton:e.confirmButton,cancelButton:e.cancelButton,getStaticText:this.getStaticText,getTitle:this.getTitle},this.props,{onSelect:this.onSelect,onDidSelect:this.onDidSelect,onOpen:this.onOpen,onClose:this.onClose,onConfirm:this.onConfirm,onCancel:this.onCancel}))}},{key:"date",get:function(){return this.state.outOfRange?Number.NaN:this.state.defaultDate}}]),t}(l.Component);M.propTypes={max:b,min:b,defaultDate:b,type:l.PropTypes.oneOf(["date","datetime","time","month"]),locale:x,use24hours:l.PropTypes.bool,title:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.node]),onSelect:l.PropTypes.func,onDidSelect:l.PropTypes.func,onOpen:l.PropTypes.func,onClose:l.PropTypes.func,onConfirm:l.PropTypes.func,onCancel:l.PropTypes.func},M.defaultProps={min:"01 Jan 1970 00:00",max:"19 Jan 2038 03:14",type:"date",locale:"en",use24hours:!1},t["default"]=M},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])});